---
archapi: "1.0.0"
title: Task Manager

components:
  services:
    taskmanager-api:
      name: TaskManager Rest API
    taskmanager-worker:
      name: TaskManager Worker
    taskmanager-web:
      name: TaskManager Frontend
    gslb:
      name: Global Server Load Balancer
    coredns:
      name: Domain Name Server
  databases:
    tm-pgsql:
      type: postgres
      name: TaskManager Postgres DataBase
    tm-etcd:
      type: etcd
      name: TaskManager Etcd DataBase
  environments:
    internet:
      name: Интернет
      users:
      - $ref: '#/components/users/registred'
      environments: 
      - $ref: '#/components/environments/scod'
      - $ref: '#/components/environments/mcod'
    scod:
      name: SCOD
      services:
      - gslb
      - coredns
      environments: 
      - $ref: '#/components/environments/scod-k8s'
      - $ref: '#/components/environments/scod-pgsql'
    scod-k8s:
      name: SCOD K8S
      services:
      - taskmanager-api
      - taskmanager-worker
      - taskmanager-web
    scod-pgsql:
      databases:
      - $ref: '#/components/environments/tm-etcd'
      - $ref: '#/components/environments/tm-pgsql'
    mcod:
      name: MCOD
      services:
      - gslb
      - coredns
      environments: 
      - $ref: '#/components/environments/mcod-k8s'
      - $ref: '#/components/environments/mcod-pgsql'
    mcod-k8s:
      services:
      - taskmanager-api
      - taskmanager-worker
      - taskmanager-web
    mcod-pgsql:
      databases: 
      - tm-etcd
      - tm-pgsql    
  users:
    registred: 
      type: user
      name: Зарегистрированные пользователи
         
